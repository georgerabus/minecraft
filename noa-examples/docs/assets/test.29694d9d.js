import{E as Be}from"./index.2b3d1184.js";import{T as k,C as Ae,M as ae,V as Me,a as re,b as H,c as Ce,d as ve}from"./babylon.39bd9ef3.js";import{a as Y}from"./terrain_atlas.162877cc.js";var r=new Be({debug:!0,showFPS:!0,inverseY:!0,inverseX:!1,chunkSize:32,chunkAddDistance:[3,2],blockTestDistance:50,playerStart:[.5,5,.5],playerHeight:1.4,playerWidth:.6,playerAutoStep:!0,playerShadowComponent:!1,useAO:!0,AOmultipliers:[.92,.8,.5],reverseAOmultiplier:1,manuallyControlChunkLoading:!1,originRebaseDistance:10,lightVector:[.6,-1,-.4]});r.camera.zoomDistance=10;r.camera.pitch=.3;r.camera.heading=.3;const te="data:image/png;base64,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",q=""+new URL("trans_atlas.f560e642.png",import.meta.url).href,Ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAaCAYAAADWm14/AAAAAXNSR0IArs4c6QAAAI9JREFUSIntksENACEIBPVKoEMrs0Na8F4mhLCIp8l9mJdRYZfVUpIkSZIkOYQajZP655YRyampsAAS2jEQTiDalBoN7lx3jYSErbUWQfeRoat/QE4fPXvkhVURd67UaHhCu8AEUJSWMIo6Yth9Al3kmfJEvD5wkulcn8l9vfZ6oE9rJrB6Y2uimcKXfr/yAhU3dI9vWMHXAAAAAElFTkSuQmCC",ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAaAgMAAACr9basAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEUAAADjDv8AAAByhjh8AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADqcAAA6nAVWbS4sAAAAtSURBVAjXY2BgYGB0YIAAVhgjFMpghDFYHWEMuOKBZDCGAoEDMgMDhEIBnAEAW0QOhjGMwZ4AAAAASUVORK5CYII=",oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAaAgMAAACr9basAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEUAAADjDv8AAAByhjh8AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADqcAAA6nAVWbS4sAAABISURBVAjXY2BgYAgNYQADxtBQCIPVgTUAzBBlYITIAUkRMCMAxgDLQgErWYxQmEAITMABhwAjTIDRAaYnFOpWOAMdhEIBnAEALX4Nd4O12ekAAAAASUVORK5CYII=",Ve="data:image/png;base64,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",Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA7VBMVEV9fX1kZGRiYmKwsLCpqal/f39wcHCioqJ+fn5SUlJaWlptbW2mpqaJiYmsrKyHh4dnZ2eGhoaNjY2Ojo5jY2Ojo6O1/6ugoKB6enqSkpKFhYVWVlaXl5eDg4Obm5txcXGBgYFYWFilpaVTU1OZmZloaGhQUFCamppvb2+vr698fHxycnKurq6tra2/v7+enp6Pj493d3deXl6cnJyCgoKIiIiRkZF5eXl0dHRNTU1MTEynp6ddXV2MjIxlZWWWlpZmZmZsbGxOTk5bW1tpaWlhYWFzc3NRUVFZWVmrq6uEhIRfX19cXFxUVFQAAADM0rjRAAAAAWJLR0ROGWFx3wAAAAlwSFlzAAAOpwAADqcBVZtLiwAAAblJREFUOMuF01tbgkAQBmBcZkIoBE0mc80oxTIsD5FZ4ansXP//77Qj5YEu+K542Bd2d3ZW07RcTghdB0Dc2QEwjHw+lzNNy9rd3dvTdS0T2LYQAIWC47guQLGo66XS/r4Q5bLnoco/QJQCQhwcVCr8aJoAh4dEiNWqlDxxrXZ0lAakkgZC1OuadnwsJaK/BFKenJye8kijkQK0zBZoNgHkb4KAqNUiAjg740mFOD/fBpQA2gTt9sVFGHY6hnF5KdTfg+CKqIvY6yE6ThBsAfoDtAH6fccZDK6vo6hSIRLLcLFubobDwcCyNgGtAa3B7W2/PxpJeXd3ryaw7YcH34+JymHYaMSx626ApAaUAFoBPiqO79NW6vXxeDIRYg3Uy0JhOl2LFeDtIJZUjWazMGQ8n6uaPyafrgClAf0C03x6sm0GvMHFwrK4yMmJAETRH6D/gBIg5fOzlJYaN4xOJ4peXl5fmbaJqsOharlMIES322zWam9vmuZ5vd77OwADgA8VVepMQBnJBrPZeGwYiKMRYj4fx5+fX1/cbPM5N+Fkkg2Kxe9vbhpUt8F1k+vWai0WnseL9f1M8ANwtl+pHHQMVQAAAABJRU5ErkJggg==",De="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA5FBMVEV9fX1kZGRiYmKwsLCpqal/f39wcHCioqJ+fn5SUlJaWlptbW2mpqaJiYmsrKyHh4dnZ2eGhoaNjY2Ojo5jY2Ojo6O1/6ugoKB6enpWVlaXl5eDg4OFhYWbm5txcXGBgYGPj4+lpaVTU1OZmZloaGhQUFBVVVVvb2+vr698fHxycnKurq6/v7+enp53d3deXl6cnJyCgoKIiIiRkZF5eXl0dHRNTU1dXV1MTEynp6eWlpaQkJBsbGyMjIxlZWVmZmZbW1tpaWlhYWFzc3NRUVFZWVmEhISrq6tfX19cXFxUVFQAAAAzd8JuAAAAAWJLR0RLaQuFUAAAAAlwSFlzAAAOpwAADqcBVZtLiwAAAahJREFUOMuF03tbgjAUBnA8bIEUgiarecMU1PCeGZl4LfPy/T9QO3gJMx/evwb7wcbZQZKkRAJAlgmh9OaGEEVR1UQimdS029u7O1mWYoGuAxCSShmGaRKSTstyJnN/D5DNWhYVuQAsTAQAPDw8PuKQRcNx4Vwun78EYlQ4BwDFoiSVSjhn2+UypVy4pyecqVT+BzwCqlVCeBjGHIdS163VCAlXogD1ejxoNJ6fPa/ZVBT8OM4dp9Vqiz3gUobhONcAPYFOxzC63V6v32dMVSGMeEHm5WUw6HY17Rec1SkCXl87neGQ87dzwDyvUvF904yCd851fTSybT8UB4BHhbEZ81Opjw8cj8cBY8XJZDoFuA7YCeDnUJphzJ3NPA9BEODR7R+NB8nkfK7rosR4BxYLTcMiiyuG0/3+dbA8AM6XS841DY4F+Pz6CmvZKBQGA9FyJwDnhWocAUC7Xa3mcquVJFlWuXyYFxv8FhGl/gvWa0LwwE6AxSQezGaTiaJQOhxSqqq+v9lst9hsQYBtOJ3Gg3R6t8OmwWY3zf3v5rqLhWXhZm07FvwAm2xbXpB5tmIAAAAASUVORK5CYII=",Re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA9lBMVEV9fX1kZGRiYmKwsLCpqal/f39wcHCioqJ+fn5SUlJaWlptbW2mpqaJiYmsrKyHh4dnZ2eGhoaNjY2Ojo5jY2Ojo6OgoKB6enq1/6uFhYVWVlaXl5eDg4Obm5txcXGBgYFYWFilpaVTU1OPj4+ZmZloaGhQUFBVVVWamppvb2+bn5uvr698fHxycnKurq6tra2/v7+enp53d3deXl6cnJyIiIiRkZF5eXl0dHRNTU1MTEynp6ddXV2WlpaQkJBsbGyMjIxlZWVmZmZOTk5/gH9bW1tpaWlhYWGCgoJzc3NRUVFZWVmrq6uEhIRfX19cXFxUVFQAAADpPAm5AAAAAWJLR0RRlGl8KgAAAAlwSFlzAAAOpwAADqcBVZtLiwAAAcFJREFUOMuF02tXgkAQBmAcduJSCF7Idc0oL5gZllpmRaFWanf//69pp1Kok4f30x7mYXfYXRRFyWQAVJUxxK0txjRN1zMZwzDN7e2dHVVVUoFlATCWzdq24zCWy6lqPl8oABSLrosy6QBgd7dUoqFhMM45jcplIWjhSmVv7xfgP/kDAKpVRdnfF7Lk/ZCDg8NDqtRqCUDze169jl9iDRoNxgRFPm02EX2/1ZK9HNGiAO12Eog1YMcx6HROToKg25UTnAIIic7Oej1EuRTadrOZAKf/g37ftgeD83POSyVdh68g5vMXF8PhYGCaK8A3gsvLfn80ki1eXV8LYVk3N54XhsViENRqYeg4MeAbAB0VhfMwzGZvb2l8dxdF1ep4PJkAJADfBOhzZFuc+9NpEBCIIsT7++9Xk4DH4CEGhvH4aFm0xXRGs5lpIp2WP59TebFIAOCJxECI+VwI0wTQtO6qLDer0ymXh0N55X6B7mLx9PT8DEkA0Os1GpXKy4uiuG69/vrKGAHG3mTkVqcCnpJ0MJ2Ox5qGOBoh6noYvr9/fNBliyK6h5NJOsjllku6NIhCOM737+b7s5nrUrOelwo+AXEmY50HOoLOAAAAAElFTkSuQmCC";var i={},C=r.rendering.getScene(),s=r.registry,g=1;s.registerMaterial("greenish",{color:[.2,.5,.2]});s.registerMaterial("cloud",{color:[.9,.9,.92,.8]});i.green=s.registerBlock(g++,{material:"greenish"});i.cloud=s.registerBlock(g++,{material:"cloud"});s.registerMaterial("stone",{textureURL:te});i.stone=s.registerBlock(g++,{material:"stone"});s.registerMaterial("a",{textureURL:Ie});s.registerMaterial("b",{textureURL:De});s.registerMaterial("c",{textureURL:Re});i.abc1=s.registerBlock(g++,{material:["a","b"]});i.abc2=s.registerBlock(g++,{material:["a","b","c"]});i.abc3=s.registerBlock(g++,{material:["a","b","c","a","b","c"]});s.registerMaterial("grass",{textureURL:Y,atlasIndex:0});s.registerMaterial("gside",{textureURL:Y,atlasIndex:1});s.registerMaterial("dirt",{textureURL:Y,atlasIndex:2});s.registerMaterial("stone",{textureURL:Y,atlasIndex:3});i.dirt=s.registerBlock(g++,{material:"dirt"});i.grass=s.registerBlock(g++,{material:["grass","dirt","gside"]});i.stone=s.registerBlock(g++,{material:"stone"});s.registerMaterial("t1",{textureURL:ne,texHasAlpha:!0});s.registerMaterial("t2",{textureURL:oe,texHasAlpha:!0});i.transparent=s.registerBlock(g++,{material:["t1","t2"],opaque:!1});var z=!0;s.registerMaterial("stonea",{textureURL:q,texHasAlpha:z,atlasIndex:0});s.registerMaterial("stonec",{textureURL:q,texHasAlpha:z,atlasIndex:2});s.registerMaterial("stonee",{textureURL:q,texHasAlpha:z,atlasIndex:4});i.stoneTrans=s.registerBlock(g++,{material:["stonea","stonee","stonec"],opaque:!1});s.registerMaterial("water",{color:[.5,.5,.8,.7]});i.water=s.registerBlock(g++,{material:"water",fluid:!0});var b=r.rendering.makeStandardMaterial("shinyDirtMat");b.specularColor.copyFromFloats(1,1,1);b.specularPower=32;b.bumpTexture=new k(te,C);s.registerMaterial("shinyDirt",{color:[.45,.36,.22],renderMaterial:b});i.shinyDirt=s.registerBlock(g++,{material:"shinyDirt"});var G=Ae("pole",{},C),ie=r.rendering.makeStandardMaterial();ie.diffuseColor.set(.7,.7,.7);G.material=ie;var se=ae.Scaling(.2,1,.2);se.setTranslation(new Me(0,.5,0));G.bakeTransformIntoVertices(se);i.pole=s.registerBlock(g++,{blockMesh:G,opaque:!1,onCustomMeshCreate:function(e,A,a,n){e.rotation.y=123.456*(A+32*n)%6.28}});i.waterPole=s.registerBlock(g++,{blockMesh:G,solid:!0,opaque:!1,material:"water",fluid:!0});var le=e=>{var A=r.rendering.makeStandardMaterial("voxel_trans");A.diffuseTexture=new k(e),A.diffuseTexture.hasAlpha=!0;var a=re("transparent_block",{sideOrientation:H.DOUBLESIDE},C);a.material=A,a.rotation.y+=Math.PI/4,a.bakeTransformIntoVertices(ae.Translation(0,.5,0));var n=a.clone();n.rotation.y+=Math.PI/2;var t=H.MergeMeshes([a,n],!0);return t};i.custom1=s.registerBlock(g++,{blockMesh:le(ne),opaque:!1});i.custom2=s.registerBlock(g++,{blockMesh:le(oe),opaque:!1});var T=r.rendering.makeStandardMaterial("windowMat");T.diffuseTexture=new k(Ve,C);T.opacityTexture=T.diffuseTexture;s.registerMaterial("window",{renderMaterial:T});i.window=s.registerBlock(g++,{material:"window",opaque:!1});var ke=(()=>{var e=r.rendering.makeStandardMaterial("grass_deco_mat");e.diffuseTexture=new k(Ee,C,{samplingMode:k.NEAREST_SAMPLINGMODE,noMipmap:!0}),e.emissiveColor.set(.3,.3,.3),e.diffuseTexture.hasAlpha=!0;var A=re("grass_deco",{sideOrientation:H.DOUBLESIDE},C);return A.material=e,A})();i.grassDeco=s.registerBlock(g++,{blockMesh:ke,opaque:!1,solid:!1,onCustomMeshCreate:e=>{e.position.y=.47,e.rotation.y=Math.random()*6.28}});var c={},j=32;c.INT_BITS=j;c.INT_MAX=2147483647;c.INT_MIN=-1<<j-1;c.sign=function(e){return(e>0)-(e<0)};c.abs=function(e){var A=e>>j-1;return(e^A)-A};c.min=function(e,A){return A^(e^A)&-(e<A)};c.max=function(e,A){return e^(e^A)&-(e<A)};c.isPow2=function(e){return!(e&e-1)&&!!e};c.log2=function(e){var A,a;return A=(e>65535)<<4,e>>>=A,a=(e>255)<<3,e>>>=a,A|=a,a=(e>15)<<2,e>>>=a,A|=a,a=(e>3)<<1,e>>>=a,A|=a,A|e>>1};c.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};c.popCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24};function de(e){var A=32;return e&=-e,e&&A--,e&65535&&(A-=16),e&16711935&&(A-=8),e&252645135&&(A-=4),e&858993459&&(A-=2),e&1431655765&&(A-=1),A}c.countTrailingZeros=de;c.nextPow2=function(e){return e+=e===0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1};c.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)};c.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var R=new Array(256);(function(e){for(var A=0;A<256;++A){var a=A,n=A,t=7;for(a>>>=1;a;a>>>=1)n<<=1,n|=a&1,--t;e[A]=n<<t&255}})(R);c.reverse=function(e){return R[e&255]<<24|R[e>>>8&255]<<16|R[e>>>16&255]<<8|R[e>>>24&255]};c.interleave2=function(e,A){return e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,A&=65535,A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,A=(A|A<<1)&1431655765,e|A<<1};c.deinterleave2=function(e,A){return e=e>>>A&1431655765,e=(e|e>>>1)&858993459,e=(e|e>>>2)&252645135,e=(e|e>>>4)&16711935,e=(e|e>>>16)&65535,e<<16>>16};c.interleave3=function(e,A,a){return e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,A&=1023,A=(A|A<<16)&4278190335,A=(A|A<<8)&251719695,A=(A|A<<4)&3272356035,A=(A|A<<2)&1227133513,e|=A<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,e|a<<2};c.deinterleave3=function(e,A){return e=e>>>A&1227133513,e=(e|e>>>2)&3272356035,e=(e|e>>>4)&251719695,e=(e|e>>>8)&4278190335,e=(e|e>>>16)&1023,e<<22>>22};c.nextCombination=function(e){var A=e|e-1;return A+1|(~A&-~A)-1>>>de(e)+1};var $=c;function xe(e){for(var A=0,a=e.length,n=0,t,o;n<e.length;){for(t=e[n],o=0;n<a&&e[n]===t;)++n,++o;A+=$.log2(o)/7|0,A+=$.log2(t>>>0)/7|0,A+=2}return A}function Ue(e,A){A||(A=new Uint8Array(xe(e)));for(var a=0,n=A.length,t=0,o,l;t<e.length;){for(o=e[t],l=0;t<e.length&&e[t]===o;)++t,++l;for(;a<n&&l>=128;)A[a++]=128+(l&127),l>>>=7;if(a>=n)throw new Error("RLE buffer overflow");for(A[a++]=l,o>>>=0;a<n&&o>=128;)A[a++]=128+(o&127),o>>>=7;if(a>=n)throw new Error("RLE buffer overflow");A[a++]=o}return A}var Ze=Ue;function Se(e,A){for(var a=A.length,n=e.length,t=0,o=0,l,d,u,m;o<n;){for(l=0,d=0;o<n&&e[o]>=128;)l+=(e[o++]&127)<<d,d+=7;if(l+=e[o++]<<d,o>=n)throw new Error("RLE buffer underrun");if(t+l>a)throw new Error("Chunk buffer overflow");for(u=0,d=0;o<n&&e[o]>=128;)u+=(e[o++]&127)<<d,d+=7;if(o>=n)throw new Error("RLE buffer underrun");for(u+=e[o++]<<d,m=0;m<l;++m)A[t++]=u}return A}var Te=Se,O="world1",ce="world2",_={},Oe=e=>!!_[e],Ye=(e,A)=>{_[e]=Ze(A.data)},be=(e,A)=>{Te(_[e],A.data)};r.worldName=O;r.inputs.bind("swap-world","KeyO");r.inputs.down.on("swap-world",function(){r.worldName=r.worldName===O?ce:O});r.world.on("chunkBeingRemoved",function(e,A,a){Ye(e,A)});var K=[];r.world.on("worldDataNeeded",function(e,A,a,n,t,o){K.push({id:e,array:A,x:a,y:n,z:t,worldName:o})});setInterval(function(){for(var e=0;e<10;e++){if(K.length===0)return;var A=K.shift();if(Oe(A.id))be(A.id,A.array);else{if(A.y<-50||A.y>50){var a=A.y>=0?0:i.stone;return r.world.setChunkData(A.id,A.array,null,a)}Ge(A.array,A.x,A.y,A.z,A.worldName)}r.world.setChunkData(A.id,A.array)}},10);function Ge(e,A,a,n,t){t===O&&Qe(e,A,a,n),t===ce&&Pe(e,A,a,n)}function Qe(e,A,a,n){var t=e.shape[0];if(a===0)for(var o=0;o<t;++o)e.set(o,20,2,3);for(var l=0;l<t;++l)for(var d=A+l,u=0;u<t;++u){var m=n+u,x=y(d,m,18,22);x+=y(d,m+50,9,6)/2;for(var f=0;f<t;++f){var w=ue(d,a+f,m,x);w&&e.set(l,f,u,w)}var E=Ne(d,m,20,30);if(E>0){var V=E-2*Math.sin(d/17),B=E+3*Math.sin(m/22);for(f=0;f<t;++f)a+f<V||a+f>B||e.set(l,f,u,i.cloud)}}}function Pe(e,A,a,n){for(var t=0;t<e.shape[0];++t)for(var o=0;o<e.shape[2];++o)for(var l=y(A+t,n+o,20,40),d=0;d<e.shape[1];++d){var u=ue(A+t,a+d,n+o,l);u===i.grass&&(u=i.stone),u&&e.set(t,d,o,u)}}function y(e,A,a,n){var t=1.7*Math.sin(e/a),o=2.2*Math.sin(A/n),l=Math.sqrt(e*e+A*A);return(t+o)*Math.min(1,l/100)}function Ne(e,A,a,n){var t=5+5*Math.sin(5+e/a),o=6+4*Math.sin(8+A/n-e/35),l=3+7*Math.sin((e+A)/17);return t+o+l>20?35:-1}function ue(e,A,a,n){if(e>0&&a>0){var t=1;return(a==40||e==40)&&(t=20),A>=t?0:A<0?i.stone:i.green}if(A<n)return A<-2.2?i.stone:A<0?i.dirt:i.grass;if(A<n+1&&A>0){var o=A<1?.05:A<2?.1:.2;if(Math.random()<o)return i.grassDeco}return A>=0?0:i.water}setTimeout(function(){We()},500);function We(){D(2,-6,0,11,i.abc2),D(2,-5,0,13,i.transparent),D(2,-4,0,15,i.custom1),D(2,-3,0,17,i.custom2),r.setBlock(i.stoneTrans,12,1,6),r.setBlock(i.window,14,1,6),D(2,14,1,10,i.shinyDirt),r.setBlock(i.waterPole,-18,-1,15),r.setBlock(i.waterPole,-16,-1,15),r.setBlock(i.waterPole,-14,-1,15),F(20,5,1,7,1,i.pole),F(20,5,1,10,1,i.pole),F(20,5,1,12,1,i.pole),F(10,39,3,12,0,i.pole),F(10,41,3,12,0,i.pole),F(10,12,3,39,2,i.pole),F(10,12,3,41,2,i.pole)}function D(e,A,a,n,t){for(var o=0;o<e;o++)r.setBlock(t,A,a+o,n)}function F(e,A,a,n,t,o){for(var l=0;l<e;l++){var d=t===0?A:A+l,u=t===1?a:a+l,m=t===2?n:n+l;r.setBlock(o,d,u,m),t===0&&(u=a+e-l),t===1&&(d=A+e-l),t===2&&(d=A+e-l),r.setBlock(o,d,u,m)}}var Xe=r.rendering.scene,ge=r.rendering.light,Je=r.rendering.camera;ge.diffuse.set(.7,.7,.7);Xe.ambientColor.set(.3,.3,.3);var h=new Ce(1024,ge,!1,Je),Le=100;h.shadowMaxZ=Le;h.forceBackFacesOnly=!0;h.transparencyShadow=!1;h.lambda=.7;h.darkness=.4;window.gen=h;r.on("addingTerrainMesh",e=>{Q(e,!0)});r.on("removingTerrainMesh",e=>{Q(e,!1)});function Q(e,A=!1){e.metadata||(e.metadata={});var a=!!e.metadata[W];A!==a&&(A?(h.addShadowCaster(e,!0),e.isAnInstance||(e.receiveShadows=!0),e.metadata[W]=!0,e.resetDrawCache()):(h.removeShadowCaster(e,!0),e.isAnInstance||(e.receiveShadows=!1),e.metadata[W]=!1))}var W="noa_demo_has_shadows",fe=r.playerEntity,me=r.entities.getPositionData(fe),He=me.width,pe=me.height,v=Ae("player-mesh",{},r.rendering.getScene());v.material=r.rendering.makeStandardMaterial();v.scaling.x=v.scaling.z=He;v.scaling.y=pe;var Ke=[0,pe/2,0];r.entities.addComponent(fe,r.entities.names.mesh,{mesh:v,offset:Ke});Q(v,!0);function ye(e){var A=e.entities,a=.2;S||(S=ve("ball",{segments:6,diameter:2*a},e.rendering.getScene()),S.material=e.rendering.makeStandardMaterial());var n=A.getPosition(e.playerEntity),t=[n[0],n[1]+.5,n[2]],o=2*a,l=2*a,d=S.createInstance("ball_instance"),u=[0,a,0],m=!0,x=!1,f=e.entities.add(t,o,l,d,u,m,x),w=A.getPhysicsBody(f);w.restitution=.8,w.friction=.7;for(var E=e.camera.getDirection(),V=[],B=0;B<3;B++)V[B]=5*E[B];V[1]+=1,w.applyImpulse(V),X||(X=(I,P)=>{for(var N=A.getPosition(I),U=A.getPosition(P),Z=[],p=0;p<3;p++)Z[p]=2*(N[p]-U[p]);var M=A.getPhysicsBody(I);M.applyImpulse(Z)}),A.addComponent(f,A.names.collideEntities,{cylinder:!0,callback:I=>X(f,I)}),J||(J=A.createComponent({name:"remove",system:(I,P)=>{var N=A.getPosition(e.playerEntity);P.forEach(U=>{for(var Z=A.getPosition(U.__id),p=0,M=0;M<3;M++)p+=Math.abs(N[M]-Z[M]);p>500&&A.deleteEntity(U.__id)})}})),A.addComponent(f,J),Q(d,!0)}var S,X,J;r.inputs.down.on("fire",function(){if(r.targetedBlock){var e=r.targetedBlock.position;r.setBlock(0,e[0],e[1],e[2])}});var he=1;r.inputs.down.on("alt-fire",function(){if(r.targetedBlock){var e=r.targetedBlock.adjacent;r.addBlock(he,e[0],e[1],e[2])}});r.inputs.down.on("mid-fire",function(){r.targetedBlock&&(he=r.targetedBlock.blockID)});r.inputs.bind("pause","KeyP");r.inputs.down.on("pause",function(){L=!L,r.setPaused(L)});var L=!1;r.inputs.bind("invert-mouse","KeyI");r.inputs.down.on("invert-mouse",function(){r.camera.inverseY=!r.camera.inverseY});r.inputs.bind("shoot","Digit1");var ee=()=>ye(r),Fe,we;r.inputs.down.on("shoot",function(){ee(),we=setTimeout(()=>{Fe=setInterval(ee,50)},400)});r.inputs.up.on("shoot",function(){clearTimeout(we),clearInterval(Fe)});var qe=0;r.inputs.bind("slow","Digit3");r.inputs.down.on("slow",()=>{r.timeScale=[1,.1,2][++qe%3]});r.on("tick",function(e){var A=r.inputs.pointerState.scrolly;A!==0&&(r.camera.zoomDistance+=A>0?1:-1,r.camera.zoomDistance<0&&(r.camera.zoomDistance=0),r.camera.zoomDistance>10&&(r.camera.zoomDistance=10))});window.setViewDistance=(e=100)=>{e=e<50?50:e>5e3?5e3:e;var A=Math.max(1.5,e/r.world._chunkSize),a=Math.max(1.5,.5*A);r.world.setAddRemoveDistance([A,a],[A+1,a+1])};
